### 로드 밸런싱이란?? ★
    
    로드 밸런싱이란 여러개의 서버를 사용할 때 네트워크 트래픽을 적절히 분산시켜주는 것을 말한다.
    
    ---
    
    [https://www.nginx.com/resources/glossary/load-balancing/](https://www.nginx.com/resources/glossary/load-balancing/)
    
### 하나의 도메인의 서버가 여러 컴퓨터가 분산되어 있다면 DNS 입장에서 어떻게 서버의 IP를 찾을 수 있을까요? ★
    
    여러대의 서버는 보통 로드 밸런서를 두고 로드 밸런서에 VIP를 할당하기 때문에 DNS는 로드 밸런서의 VIP를 알고 있으면 된다.
    
    - 로드 밸런서의 IP가 아니라 굳이 VIP를 사용하는 이유는?
        
        들어오는 패킷이 어떤 서버 그룹에 가야하는지 구분해야하기도 하고, 하나의 로드 밸런서가 죽었을 경우 같은 VIP를 갖고 있는 다른 로드 밸런서가 대신 패킷을 처리하기 위해서 VIP라는 것을 할당 받는다.
        
        이 경우에 만약 VIP를 할당 안했다면 DNS도 새로운 로드밸런서의 IP로 새로 업데이트해야 될 것이고 서버도 얼마간 정지될 것이다.
        
### VIP란 무엇일까요? ★
    
    VIP는 가상의 IP로 여러 네트워크 기기가 하나의 IP 주소를 공유하는 기술이다.
    
    로드 밸런서를 예로 들어보면, 하나의 서버 그룹은 하나의 VIP를 갖고 이 VIP는 여러대의 로드 밸런서에 등록된다. 
    
    이 VIP를 목적지로 갖고 로드 밸런서로 들어오는 패킷은 대응되는 서버 그룹으로 전달된다.
    
    모든 패킷은 같은 VIP를 갖고 있는 로드 밸런서 중 마스터 기기가 처리하며 이 마스터 기기가 죽을 경우 다른 로드 밸런서가 마스터가 되어 패킷을 처리한다.
    
### 부하 분산 알고리즘의 종류와 장점과 단점은? ★
    - Round Robin
        
        서버들을 순회하면서 부하를 분산하는 방식
        
        - 장점
            - 균등하게 분산되기 때문에 서버간 처리 용량이 비슷할 경우 좋다.
            - 가장 빠른 알고리즘이다.
        - 단점
            - 서버간 처리 용량이 다른 경우 적합하지 않다.
    - Server Weights RR
        
        서버에 가중치를 두어 가중치가 높은 서버가 더 많은 일을 처리하게 하는 방식
        
        - 장점
            - 서버의 스펙에 따라 부하를 적절히 분산해줄 수 있다.
            - 동적 스케쥴링 방식보다 스케쥴링 부담이 적다.
        - 단점
            - 이런 식으로 분배하더라도 클라이언트가 오래 연결되있을수록 특정 서버에 부하가 몰릴 수 있다.
    - Least Connection
        
        가장 클라이언트 연결 갯수가 적은 서버로 부하를 분산하는 방식.
        
        계속 서버들의 커넥션 갯수를 세어야 하는 동적인 스케줄링 방식.
        
        - 장점
            - 접속 부하가 큰 경우에도 매우 효과적으로 부하 분산을 수행한다.
        - 단점
            - 서버간 처리 용량이 다를 경우 적합하지 않다. 왜냐하면 커넥션이 적어도 서버가 성능이 딸릴 경우 부하를 덜 주는게 낫고 커넥션이 많아도 서버가 성능이 좋으면 더 많은 부하를 주는게 낫기 때문.
                
                따라서 이 경우는 Weigthes Least connection 방식을 쓰는 것이 낫다.
                
    - ip hash
        
        IP를 hash해서 특정 IP는 특정 서버로 연결하도록 하는 방식
        
        - 장점
            - 한 서버에서만 세션관리를 하면 되므로 세션 관리가 쉽다.
        - 단점
            - 한 서버로 부하가 몰릴 수 있다.
            - 서버가 죽으면 그 서버로 할당되던 요청들에 문제가 생길 수 있다.